<?xml version="1.0" encoding="UTF-8"?>

<xwikidoc version="1.3" reference="BachelorsAndMastersManagement.Note.Raport" locale="">
  <web>BachelorsAndMastersManagement.Note</web>
  <name>Raport</name>
  <language/>
  <defaultLanguage></defaultLanguage>
  <translation>0</translation>
  <creator>xwiki:XWiki.Admin</creator>
  <creationDate>1356998400000</creationDate>
  <parent>Main.WebHome</parent>
  <author>xwiki:XWiki.Admin</author>
  <contentAuthor>xwiki:XWiki.Admin</contentAuthor>
  <date>1356998400000</date>
  <contentUpdateDate>1356998400000</contentUpdateDate>
  <version>1.1</version>
  <title>Raport</title>
  <comment/>
  <minorEdit>false</minorEdit>
  <syntaxId>xwiki/2.1</syntaxId>
  <hidden>false</hidden>
  <content>{{velocity}}
#set($Integer = 0)

#set($objectPage = "BachelorsAndMastersManagement.Note.Code.NotaObjects")
#set($MyDoc = $xwiki.getDocument($objectPage))

#set($note = {})
#foreach($nota in $MyDoc.getObjects("BachelorsAndMastersManagement.Note.Code.NotaClass"))
  #if(!$note.containsKey($nota.student))
    #set($note[$nota.student] = [])
  #end
  #set($discard = $note[$nota.student].add($nota))
#end

|=Student|=Proba 1|=Proba 2|=Observatii
#foreach($pair in $note.entrySet())
  #set($numNote = {})
  #set($sumNote = {})
  #foreach($nota in $pair.value)
    #if(!$numNote.containsKey($nota.proba))
      #set($numNote[$nota.proba] = 0)
      #set($sumNote[$nota.proba] = 0)
    #end
    #set($numNote[$nota.proba] = $numNote[$nota.proba] + 1)
    #set($sumNote[$nota.proba] = $sumNote[$nota.proba] + $Integer.parseInt($nota.nota, 10))
  #end
  ##
  #set($medii = {})
  #set($sumaMedii = 0)
  #foreach($proba in $numNote.entrySet())
    #set($medie = $sumNote[$proba.key] * 100 / $proba.value)
    #set($medii[$proba.key] = $numbertool.format("#0,00", $medie))
    #set($sumaMedii = $sumaMedii + $medie)
  #end
  ##
  #set($sumaMedii = $sumaMedii / $medii.size())
  #if($sumaMedii &gt;= 500 &amp;&amp; $medii.size() &gt;= 2)
    #set($observatii = "promovat")
  #else
    #set($observatii = "nepromovat")
  #end
  ##
  |$pair.key|$medii.getOrDefault("Proba 1", "-")|$medii.getOrDefault("Proba 2", "-")|$observatii
#end
{{/velocity}}
</content>
</xwikidoc>
